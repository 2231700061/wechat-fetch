{"version":3,"sources":["index.js","dist/wefetch.min.js"],"names":[],"mappings":";;;;;;;AAAA;;;ACAA","file":"index.js","sourcesContent":["module.exports = require('./dist/wefetch.min.js')","\"use strict\";var _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};!function(e,t){if(\"function\"==typeof define&&define.amd)define(t);else{if(\"undefined\"==typeof module||!module.exports)throw new Error(\"only supported in MiniProgramcan usage\");module.exports=t()}}(0,function(){function e(e,t){return function(){for(var n=new Array(arguments.length),o=0,r=n.length;o<r;o++)n[o]=arguments[o];return e.apply(t,n)}}function t(e){return new Promise(function(t,n){var o=wx.request({url:e.url,header:e.header,data:e.data||{},method:e.method||\"GET\",dataType:e.type||\"json\",responseType:e.responseType||\"text\",success:t,fail:n});o&&(Promise.prototype.task=o)})}function n(){this.handles=[]}function o(e){this.defaults=e}function r(e){\"post\"===e.method&&(e.header[\"Content-Type\"]=\"application/x-www-form-urlencoded;charset=utf-8\"),\"postJson\"===e.method&&(e.method=\"post\",e.header[\"Content-Type\"]=\"application/json;charset=utf-8\");var t=e.createRequest;return e.baseUrl&&(e.url=e.baseUrl+e.url),t(e).then(function(e){return e},function(e){if(e)return e})}var u=Object.prototype.toString,i=[\"options\",\"get\",\"head\",\"post\",\"put\",\"delete\",\"trace\",\"connect\",\"postJson\"],f={type:function(){for(var e={},t=[\"String\",\"Object\",\"Number\",\"Array\",\"Undefined\",\"Function\",\"Null\",\"Date\"],n=0,o=t.length;n<o;n++)!function(t){e[\"is\"+t]=function(e){return u.call(e)===\"[object\"+t+\"]\"}}(t[n]);return e}(),forEach:function(e,t){if(null!==e||void 0!==e)if(\"object\"!==(void 0===e?\"undefined\":_typeof(e))&&(e=[e]),Array.isArray(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)},merge:function(){function e(e,n){\"object\"===_typeof(t[n])&&\"object\"===(void 0===e?\"undefined\":_typeof(e))?t[n]=f.merge(t[n],e):t[n]=e}for(var t={},n=0,o=arguments.length;n<o;n++)this.forEach(arguments[n],e);return t},extends:function(t,n,o){return this.forEach(n,function(n,r){t[r]=o&&\"function\"===n?e(n,o):n}),t},mergeConfig:function(e,t){var n=t||{};for(var o in n)e[o]=n[o]||e[o];return e}},c={createRequest:t,baseUrl:\"\",header:{}};Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){t.resolve(e()).then(function(){return n})},function(n){t.resolve(e()).then(function(){throw n})})},n.prototype.use=function(e,t){this.handles.push({fulfilled:e,rejectd:t})},n.prototype.eject=function(e){this.handles[e]&&(this.handles[e]=null)},n.prototype.forEach=function(e){f.forEach(this.handles,function(t){t&&e(t)})},o.prototype.before=new n,o.prototype.after=new n,o.prototype.request=function(e){e=f.merge(c,e);var t=[r,void 0],n=Promise.resolve(e);for(this.before.forEach(function(e){t.unshift(e.fulfilled,e.rejectd)}),this.after.forEach(function(e){t.push(e.fulfilled,e.rejectd)});t.length;)n=n.then(t.shift(),t.shift());return n},f.forEach(i,function(e){o.prototype[e]=function(t,n,o){return this.request(f.merge(o||{},{url:t,data:n,config:o,method:e}))}});var s=function(t){var n=new o(t),r=e(o.prototype.request,n);return f.extends(r,o.prototype,n),f.extends(r,n),r}(c);return s.all=function(e){return Promise.all(e)},s});"]}