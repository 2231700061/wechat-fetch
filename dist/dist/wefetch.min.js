"use strict";var _extends2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&module.exports?module.exports=e():t.wefetch=e()}(void 0,function(){function t(){this.handles=[]}function e(e){this.defaults=e,this.interceptors={request:new t,response:new t}}function n(t){return t.baseUrl&&(t.url=t.baseUrl+"/"+t.url),t.createRequest(t).then(function(t){return t},function(t){if(t)return t})}var o=Object.prototype.toString,r={type:function(){for(var t={},e=["String","Object","Number","Array","Undefined","Function","Null","Date"],n=0,r=e.length;n<r;n++)!function(e){t["is"+e]=function(t){return o.call(t)==="[object"+e+"]"}}(e[n]);return t}(),forEach:function(t,e){if(null!==t||void 0!==t)if("object"!==(void 0===t?"undefined":_typeof(t))&&(t=[t]),Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)},merge:function(){function t(t,n){"object"===_typeof(e[n])&&"object"===(void 0===t?"undefined":_typeof(t))?e[n]=r.merge(e[n],t):e[n]=t}for(var e={},n=0,o=arguments.length;n<o;n++)this.forEach(arguments[n],t);return e},bind:function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}},extends:function(t,e,n){return this.forEach(e,function(e,o){t[o]=n&&"function"===e?r.bind(e,n):e}),t}},i={createRequest:function(t){return function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return new Promise(function(n,r){t.apply(void 0,[_extends2({},e,{success:n,fail:r})].concat(o))})}}(wx.request),baseUrl:"",formData:!1};Promise.prototype.finally=function(t){var e=this.constructor;return console.log(this),this.then(function(n){e.resolve(t()).then(function(){return n})},function(n){e.resolve(t()).then(function(){throw n})})},t.prototype.use=function(t,e){this.handles.push({fulfilled:t,rejectd:e})},t.prototype.eject=function(t){this.handles[t]&&(this.handles[t]=null)},t.prototype.forEach=function(t){r.forEach(this.handles,function(e){e&&t(e)})},e.prototype.before=new t,e.prototype.after=new t,e.prototype.request=function(t){t=r.merge(i,t);var e=[n,void 0],o=Promise.resolve(t);for(this.before.forEach(function(t){e.unshift(t.fulfilled,t.rejectd)}),this.after.forEach(function(t){e.push(t.fulfilled,t.rejectd)});e.length;)o=o.then(e.shift(),e.shift());return o},r.forEach(["options","get","head","post","put","delete","trace","connect"],function(t){e.prototype[t]=function(t,e,n){return this.request(r.merge(n||{},{url:t,data:e,config:n}))}});return function(t){var n=new e(t),o=r.bind(e.prototype.request,n);return r.extends(o,e.prototype,n),r.extends(o,n),o}(i)});